import { Task } from '@/types/task';

export const mockTasks: Record<string, Task> = {
  // Root chain containing a simple task, a swarm, and another simple task
  'root-1': {
    id: 'root-1',
    type: 'chain',
    name: 'Main Process Chain',
    status: 'running',
    children_ids: ['first-task', 'parallel-workers', 'third-task'],
    success_callback_ids: ['callback-success-1'],
    error_callback_ids: ['callback-error-1'],
    metadata: { priority: 'high' }
  },
  'first-task': {
    id: 'first-task',
    type: 'simple',
    name: 'First Task',
    status: 'completed',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
    metadata: { duration: '2s' }
  },
  'parallel-workers': {
    id: 'parallel-workers',
    type: 'swarm',
    name: 'Parallel Workers',
    status: 'running',
    children_ids: ['worker-a', 'worker-b', 'worker-c'],
    success_callback_ids: [],
    error_callback_ids: [],
    metadata: { parallelism: 3 }
  },
  'worker-a': {
    id: 'worker-a',
    type: 'simple',
    name: 'Worker A',
    status: 'completed',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'worker-b': {
    id: 'worker-b',
    type: 'simple',
    name: 'Worker B',
    status: 'running',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'worker-c': {
    id: 'worker-c',
    type: 'simple',
    name: 'Worker C',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'third-task': {
    id: 'third-task',
    type: 'simple',
    name: 'Third Task',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  
  // Success callback
  'callback-success-1': {
    id: 'callback-success-1',
    type: 'simple',
    name: 'Send Notification',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  
  // Error callback as a chain
  'callback-error-1': {
    id: 'callback-error-1',
    type: 'chain',
    name: 'Error Handler',
    status: 'pending',
    children_ids: ['error-task-1', 'error-task-2'],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'error-task-1': {
    id: 'error-task-1',
    type: 'simple',
    name: 'Log Error',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'error-task-2': {
    id: 'error-task-2',
    type: 'simple',
    name: 'Alert Team',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },

  // Second root: Swarm containing nested chains (as in the reference image)
  'root-2': {
    id: 'root-2',
    type: 'swarm',
    name: 'Parallel Chains',
    status: 'running',
    children_ids: ['pipeline-a', 'pipeline-b'],
    success_callback_ids: ['notify-complete'],
    error_callback_ids: [],
  },
  'pipeline-a': {
    id: 'pipeline-a',
    type: 'chain',
    name: 'Pipeline A',
    status: 'running',
    children_ids: ['a-step-1', 'a-step-2'],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'a-step-1': {
    id: 'a-step-1',
    type: 'simple',
    name: 'A: Step 1',
    status: 'completed',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'a-step-2': {
    id: 'a-step-2',
    type: 'simple',
    name: 'A: Step 2',
    status: 'running',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'pipeline-b': {
    id: 'pipeline-b',
    type: 'chain',
    name: 'Pipeline B',
    status: 'pending',
    children_ids: ['b-step-1', 'b-step-2'],
    success_callback_ids: [],
    error_callback_ids: ['retry-pipeline-b'],
  },
  'b-step-1': {
    id: 'b-step-1',
    type: 'simple',
    name: 'B: Step 1',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'b-step-2': {
    id: 'b-step-2',
    type: 'simple',
    name: 'B: Step 2',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'retry-pipeline-b': {
    id: 'retry-pipeline-b',
    type: 'simple',
    name: 'Retry Pipeline B',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'notify-complete': {
    id: 'notify-complete',
    type: 'simple',
    name: 'All Pipelines Complete',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },

  // Third root: Large swarm to show pagination
  'root-3': {
    id: 'root-3',
    type: 'swarm',
    name: 'Parallel Processing',
    status: 'running',
    children_ids: ['parallel-1', 'parallel-2', 'parallel-3', 'parallel-4', 'parallel-5', 'parallel-6', 'parallel-7', 'parallel-8'],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'parallel-1': {
    id: 'parallel-1',
    type: 'simple',
    name: 'Parallel 1',
    status: 'completed',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'parallel-2': {
    id: 'parallel-2',
    type: 'simple',
    name: 'Parallel 2',
    status: 'completed',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'parallel-3': {
    id: 'parallel-3',
    type: 'simple',
    name: 'Parallel 3',
    status: 'running',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'parallel-4': {
    id: 'parallel-4',
    type: 'simple',
    name: 'Parallel 4',
    status: 'running',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'parallel-5': {
    id: 'parallel-5',
    type: 'simple',
    name: 'Parallel 5',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'parallel-6': {
    id: 'parallel-6',
    type: 'simple',
    name: 'Parallel 6',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'parallel-7': {
    id: 'parallel-7',
    type: 'simple',
    name: 'Parallel 7',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
  'parallel-8': {
    id: 'parallel-8',
    type: 'simple',
    name: 'Parallel 8',
    status: 'pending',
    children_ids: [],
    success_callback_ids: [],
    error_callback_ids: [],
  },
};

export const rootTaskIds = ['root-1', 'root-2', 'root-3'];

export const getTask = (id: string): Task | undefined => mockTasks[id];

export const getRootTasks = (): Task[] => 
  rootTaskIds.map(id => mockTasks[id]).filter(Boolean);
